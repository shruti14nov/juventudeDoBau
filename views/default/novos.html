{{extend 'layout.html'}}
<h1>Olar {{="%(first_name)s %(last_name)s" %auth.user}}</h1>
<hr>
<div class="container">
{{for post in posts[0]:}}
    <div class="panel panel-default">
        <div class="panel-heading">
            <img class='avatar responsive-img' src="{{=URL('download', args=post.created_by.avatar)}}" alt="{{=post.created_by.nome}}" />
            <a href="{{=URL('perfil', vars={'user_id':post.created_by.id})}}">{{=post.created_by.first_name}}</a> digou:
            {{n_comments = 0}}
            {{for c in comentarios:}}
              {{if c.id == post.id:}}
                {{n_comments += 1}}
              {{pass}}
            {{pass}}
            <a class=pull-right href="{{=URL('default', 'post', args=post.id)}}">{{=n_comments}} comentários</a>
        </div>
        <div class="panel-body">
          {{=DIV(MARKMIN(post.corpo), _class='post-body')}}<br>
          <small>{{=prettydate(post.created_on)}}</small><!-- Data formatada-->
          <p>{{=LOAD('default', 'curtir.load', vars={'id':post.id, 'voto':'legal'}, ajax=True)}}</p>
        </div>
    </div>
{{pass}}

<div class="pager">
  {{if int(request.vars.pagina) != 1:}}
    <a href="{{=URL('default', 'timeline', args=request.args, vars={'pagina':int(request.vars.pagina)-1})}}">❮ Anterior</a>&emsp;
  {{pass}}
  {{if int(request.vars.pagina) < posts[2]/10.0:}}
    <a href="{{=URL('default', 'timeline', args=request.args, vars={'pagina':int(request.vars.pagina)+1})}}">Próxima ❯</a>&emsp;
  {{pass}}
</div>

</div>
